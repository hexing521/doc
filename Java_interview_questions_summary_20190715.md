
### 多线程
#### CPU核心数、线程数的关系
    
    Cpu核心数可以理解为逻辑上模拟出的核心数；  
    线程数个数=cpu个数*cpu核心数*超线程数
     
#### 在CPU时间片轮转机制中设置多少毫秒是合理的？

#### 什么是进程？什么是线程？一个进程最多可以创建多少个线程？
    
    进程是系统进行资源分配和调度的一个独立单元；    
    线程是进程的实体，是cpu资源分配和调度的最小单元，线程本身不拥有资源，它只拥有一些运行时所需要的资源（寄存器，栈，程序计数器等）,    
    它可与同属同一个进程的其他线程共享进程所拥有的所有资源;  
    默认情况下，一个线程的栈要预留1M的内存空间,而一个进程中可用的内存空间只有2G，所以理论上一个进程中最多可以开2048个线程,  
    但是内存当然不可能完全拿来作线程的栈，所以实际数目要比这个值要小。

#### 用户单一进程同时可打开文件数量是多少？

    使用命令 ulimit -n 可以看到系统对于单个进程的限制，即open files;   
    open files  (-n) 65535  : 表示当前登录的用户，每个进程可以打开65535个句柄,当然总和不能超过 file-max 限制;   
    
#### 什么是并行，什么是并发？  
   
    并发:一个处理器同时处理多个任务。  
    并行:多个处理器或者是多核的处理器同时处理多个不同的任务.
![](https://ws3.sinaimg.cn/large/006tNc79gy1g54cte7ew5j31ky0fsq53.jpg)
    
#### 什么是同步，什么是异步，什么是堵塞，什么是非堵塞？

    同步:发出一个同步调用后，如果未得到结果，则一直等待，知道结果返回;  
    异步:发出一个异步调用后，该调用未立即得到结果，而程序继续运行；   
    例如:一个服务被分割为多个任务，服务获取的结果要求每个任务顺序执行，并依赖所有任务的执行结果，这种就是同步，如果该服务的结果不依赖所有的任务  
    则为异步;  
    阻塞: 服务依赖的某个任务执行完毕之前，工作线程一直在等待该任务返回的结果；  
    非阻塞: 服务不需要依赖任务执行完毕，工作线程就直接处理下一个任务；    
    简述:   
    同步：服务依赖任务的执行结果     
    异步：服务不依赖任务的执行结果   
    阻塞：服务执行时线程会出现等待状态     
    非阻塞：服务执行时线程不会出现等待状态      


#### 实现线程的三种方式？
    
    

* 线程的生命周期是什么？线程池的初始化的时候，池里面的线程处于生命周期的那个阶段？
* 什么是线程组？其左右是什么？
* ThreadLocal是用来解决共享资源的多线程访问的问题吗？

* 每次使用完ThreadLocal，都调用它的remove()方法，为什么呢？
* volatile的作用？
* run方法是否可以抛出异常？如果抛出异常，线程的状态如何？
* 什么是隐式锁？什么是显式锁？什么是无锁？
* 多线程之间是如何通信的？
* Java的内存模型是什么？
* 什么是原子操作？生成对象的过程是不是原子操作？
* CopyOnWrite机制是什么？
* 什么是CAS?
* 什么是AQS?

* Fail-Fast机制是多线程原因造成的吗？
* 为什么要用线程池？常见的线程池有哪些？
* 阻塞队列的常用方法？
* 为什么数组比链表随机访问速度会快很多呢？
* 什么时候用定时器，什么时候用延时队列？
* 堵塞队列的add，offer，put的区别？
* 线程的阻塞与挂起有什么区别？
* sleep的时候，是否会释放已经获得到锁？
* yield的作用是什么？
* join的作用？

* sleep方法和yield方法的区别？
* 什么时候会发生InterruptedException异常？
* 如何设计一个利用无锁来实现线程的安全？
* 隐式锁什么情况下会释放锁？
* 描述一下可重入的实现机制？
* 什么是内存可见性？什么是寄存器可见性？
* 什么是自旋？举例说明一下。自旋的后果是什么呢？
* notifyAll之后所有的线程都会在次抢夺锁，如果抢夺失败怎么办？
* 什么是内存栅栏？
* 什么是before-happen？

* 常见的限流算法有哪些？
* synchronized锁的范围有哪些？
* 为什么使用线程池技术？
* 常见的创建线程池的三种方式是什么？各有什么特点？
* 可缓存的线程池中多少秒未使用的线程将被移除？
* 线程池内部的核心队列什么？
* 线程池中控制线程创建数目的参数是什么？
* 线程池在什么情况下需要丢弃处理？
* 线程池任务拒绝策略有哪些？
* 创建线程池常用的堵塞队列有哪些？
* Future的主要功能是什么？
* FutureTask的结构关系？FutureTask如何使用呢？



#### 案例一
* 自我介绍及项目
* java的内存分区
* java对象的回收方式,回收算法
* CMS和G1了解吗，CMS解决什么问题，说一下回收的过程
* CMS回收停顿了几次？为什么要停顿两次.
* java栈什么时候回发生内存溢出，java堆呢？说一种场景（集合类持有对象）,集合类如何解决这个问题呢，用软引用和弱引用，再讲下这两个引用的区别
* java里的锁了解哪些，Lock和synchronized，他们的使用方式和实现原理有什么区别？
* synchronized升级的过程，偏向锁到轻量级锁再到重量级锁，他们是如何实现的，解决了哪些问题，什么时候发生锁升级
* tomcat了解吗,说下类加载结构
* 关于spring,spring 如何让A和B两个Bean按顺序加载
* 10亿数据去重


#### 案例二 
* 1.jvm内存模型，
* 2.Oom和stackOverFlow的差别，for循环一直创建线程并且run起来会报什么错，
* 3.线程安全，锁，
* 4.gc，
* 5.ConcurrentHashMap1.8，
* 6.Zookeeper，
* 7.Mysql引擎和索引，
* 8.分页查询效率问题，
* 9.还有现场coding，写一个函数，输入n，表示n对括号，返回复合规则的括号组合的数量，比如输入1，组合有()，那么返回就是1，输入是2，
    组合有()()、(())，那   么返回2，输入3，能有这些组合()()()，(())()，()(())，((()))，(()())，所以输出为5

